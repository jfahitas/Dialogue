<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialogue Facilitation Practice</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a1a 30%, #2a1025 70%, #1a0a1a 100%);
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(80, 0, 0, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(128, 0, 128, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(0, 100, 200, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            min-height: 100vh;
            backdrop-filter: blur(10px);
            position: relative;
        }

        .header {
            background: rgba(80, 0, 0, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(80, 0, 0, 0.2);
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 12px;
            font-weight: 300;
            color: #ffffff;
            text-shadow: 0 0 30px rgba(80, 0, 0, 0.5);
        }

        .header p {
            font-size: 18px;
            opacity: 0.8;
            font-weight: 300;
        }

        .progress-container {
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71, #27ae60);
            width: 0%;
            transition: width 1s cubic-bezier(0.4, 0.0, 0.2, 1);
            box-shadow: 0 0 20px rgba(39, 174, 96, 0.8);
        }

        .content {
            padding: 50px;
        }

        .screen {
            display: none;
            animation: fadeInUp 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        .scenario-intro {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .scenario-intro::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #27ae60, #2ecc71);
        }

        .scenario-title {
            font-size: 28px;
            font-weight: 300;
            color: #ffffff;
            margin-bottom: 20px;
        }

        .scenario-description {
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            line-height: 1.7;
        }

        .learning-objective {
            background: rgba(255, 193, 7, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 193, 7, 0.2);
            position: relative;
        }

        .learning-objective::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #ffc107, #ffca28);
        }

        .objective-label {
            font-weight: 500;
            color: #ffc107;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .conversation-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .speaker {
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }

        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
            font-size: 24px;
            background: linear-gradient(135deg, #500000, #800000);
            box-shadow: 0 8px 32px rgba(80, 0, 0, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .message {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            flex: 1;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .speaker-name {
            font-weight: 500;
            margin-bottom: 12px;
            color: #ffffff;
            font-size: 16px;
        }

        .speaker-message {
            color: rgba(255, 255, 255, 0.9);
            font-size: 15px;
            line-height: 1.6;
        }

        .question-prompt {
            background: rgba(39, 174, 96, 0.1);
            backdrop-filter: blur(15px);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border: 1px solid rgba(39, 174, 96, 0.2);
            position: relative;
        }

        .question-prompt::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #27ae60, #2ecc71);
        }

        .prompt-text {
            font-size: 18px;
            font-weight: 500;
            color: #2ecc71;
            margin-bottom: 20px;
        }

        .response-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .response-btn {
            padding: 20px 25px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            color: rgba(255, 255, 255, 0.9);
            text-align: left;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            font-size: 15px;
            line-height: 1.5;
            position: relative;
            overflow: hidden;
        }

        .response-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(46, 204, 113, 0.05));
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .response-btn:hover::before {
            opacity: 1;
        }

        .response-btn:hover {
            border-color: rgba(39, 174, 96, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.2);
        }

        .response-btn.selected {
            background: rgba(39, 174, 96, 0.15);
            border-color: #27ae60;
            color: #ffffff;
            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.3);
        }

        .feedback-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            display: none;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .feedback-panel.show {
            display: block;
            animation: slideDown 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        @keyframes slideDown {
            from { 
                opacity: 0; 
                transform: translateY(-20px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        .feedback-good {
            border-color: #27ae60 !important;
            background: rgba(39, 174, 96, 0.1) !important;
        }

        .feedback-good::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #27ae60, #2ecc71);
        }

        .feedback-needs-work {
            border-color: #ffc107 !important;
            background: rgba(255, 193, 7, 0.1) !important;
        }

        .feedback-needs-work::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #ffc107, #ffca28);
        }

        .feedback-title {
            font-weight: 500;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        .feedback-good .feedback-title {
            color: #2ecc71;
        }

        .feedback-needs-work .feedback-title {
            color: #ffc107;
        }

        .feedback-text {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transition: width 0.4s ease, height 0.4s ease;
            transform: translate(-50%, -50%);
        }

        .nav-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        .nav-btn:disabled:hover {
            transform: none;
        }

        .next-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            box-shadow: 0 8px 32px rgba(39, 174, 96, 0.4);
        }

        .next-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(39, 174, 96, 0.6);
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .back-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
            transform: translateY(-2px);
        }

        .step-info {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 300;
        }

        .completion-panel {
            background: rgba(39, 174, 96, 0.1);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(39, 174, 96, 0.3);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin: 30px 0;
            position: relative;
        }

        .completion-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #27ae60, #2ecc71, #27ae60);
        }

        .completion-title {
            font-size: 32px;
            font-weight: 300;
            color: #ffffff;
            margin-bottom: 20px;
        }

        .completion-description {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 30px;
            font-size: 16px;
        }

        .score-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .score-item {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .score-value {
            font-size: 32px;
            font-weight: bold;
            color: #2ecc71;
            margin-bottom: 5px;
        }

        .score-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .key-takeaway {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .key-takeaway::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, #27ae60, #2ecc71);
        }

        .key-takeaway strong {
            color: #2ecc71;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .content {
                padding: 30px 20px;
            }
            
            .score-summary {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }

            .speaker {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .avatar {
                align-self: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Dialogue Facilitation Practice</h1>
            <p>Inquiry-Based Conversation Skills Training</p>
        </div>
        
        <div class="progress-container">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="content">
            <div id="intro-screen" class="screen active">
                <div class="scenario-intro">
                    <div class="scenario-title">Welcome to Dialogue Facilitation Practice</div>
                    <div class="scenario-description">
                        In this practice session, you'll work through three different scenarios to develop your inquiry-based facilitation skills. Each scenario presents real challenges that emergency service coordinators face when facilitating multi-agency discussions.
                    </div>
                    <div class="learning-objective">
                        <div class="objective-label">Learning Objective:</div>
                        Practice moving conversations from positions to interests using inquiry-based questions rather than advocacy-based approaches.
                    </div>
                </div>
                
                <div class="navigation">
                    <div></div>
                    <button class="nav-btn next-btn" onclick="startScenario(1)">Start Practice</button>
                </div>
            </div>

            <div id="scenario-screen" class="screen">
                <div class="scenario-intro">
                    <div class="scenario-title" id="scenarioTitle">Equipment Procurement Disagreement</div>
                    <div class="scenario-description" id="scenarioDescription">
                        Multiple agencies are meeting to decide on new equipment purchases. Each department has strong preferences for different solutions. Your role is to facilitate a conversation that uncovers underlying needs rather than defending positions.
                    </div>
                    <div class="learning-objective">
                        <div class="objective-label">Focus:</div>
                        <span id="scenarioFocus">Understanding underlying needs vs. defending preferences</span>
                    </div>
                </div>

                <div class="conversation-panel">
                    <div class="speaker" id="currentSpeaker">
                        <div class="avatar">🚒</div>
                        <div class="message">
                            <div class="speaker-name">Alex Fire - Fire Department</div>
                            <div class="speaker-message" id="speakerMessage">We absolutely need the heavy-duty rescue vehicle. Our department has been requesting this for months, and it's critical for our operations.</div>
                        </div>
                    </div>
                </div>

                <div class="question-prompt">
                    <div class="prompt-text">How do you respond as the facilitator?</div>
                    <div class="response-options" id="responseOptions">
                        <button class="response-btn advocacy" onclick="selectResponse(0, 'advocacy')">
                            "Alex, can you explain why the heavy-duty vehicle is the best choice over other options?"
                        </button>
                        <button class="response-btn inquiry" onclick="selectResponse(1, 'inquiry')">
                            "What specific challenges are you currently facing that you're hoping this equipment will address?"
                        </button>
                        <button class="response-btn inquiry" onclick="selectResponse(2, 'inquiry')">
                            "Help us understand what 'critical for operations' means in practical terms for your team."
                        </button>
                    </div>
                </div>

                <div class="feedback-panel" id="feedbackPanel">
                    <div class="feedback-title" id="feedbackTitle">
                        <span>✓</span> Excellent Choice!
                    </div>
                    <div class="feedback-text" id="feedbackText">
                        This inquiry-based question helps move the conversation from Alex's position (wanting the vehicle) to understanding the underlying interests and needs. It encourages deeper exploration without challenging their request directly.
                    </div>
                </div>

                <div class="navigation">
                    <button class="nav-btn back-btn" onclick="goBack()" id="backBtn">Back</button>
                    <div class="step-info">
                        <span id="stepInfo">Step 1 of 9</span>
                    </div>
                    <button class="nav-btn next-btn" onclick="nextStep()" id="nextBtn" disabled>Continue</button>
                </div>
            </div>

            <div id="completion-screen" class="screen">
                <div class="completion-panel">
                    <div class="completion-title">Practice Complete!</div>
                    <div class="completion-description">You've successfully completed all three dialogue facilitation scenarios.</div>
                    
                    <div class="score-summary">
                        <div class="score-item">
                            <div class="score-value" id="inquiryScore">78%</div>
                            <div class="score-label">Inquiry Questions</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value" id="totalQuestions">9</div>
                            <div class="score-label">Questions Asked</div>
                        </div>
                        <div class="score-item">
                            <div class="score-value" id="overallScore">85</div>
                            <div class="score-label">Overall Score</div>
                        </div>
                    </div>
                    
                    <div class="key-takeaway">
                        <strong>Key Takeaway:</strong> Effective dialogue facilitation focuses on inquiry (understanding needs) rather than advocacy (pushing solutions). This helps teams move from positions to interests and find collaborative solutions.
                    </div>
                </div>
                
                <div class="navigation">
                    <button class="nav-btn back-btn" onclick="restart()">Restart Practice</button>
                    <div></div>
                    <div></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        let currentScenario = 1;
        let inquiryCount = 0;
        let advocacyCount = 0;
        let responses = [];

        const scenarios = [
            {
                title: "Equipment Procurement Disagreement",
                description: "Multiple agencies are meeting to decide on new equipment purchases. Each department has strong preferences for different solutions. Your role is to facilitate a conversation that uncovers underlying needs rather than defending positions.",
                focus: "Understanding underlying needs vs. defending preferences",
                steps: [
                    {
                        speaker: "Alex Fire - Fire Department",
                        avatar: "🚒",
                        message: "We absolutely need the heavy-duty rescue vehicle. Our department has been requesting this for months, and it's critical for our operations.",
                        options: [
                            {text: "Alex, can you explain why the heavy-duty vehicle is the best choice over other options?", type: "advocacy"},
                            {text: "What specific challenges are you currently facing that you're hoping this equipment will address?", type: "inquiry"},
                            {text: "Help us understand what 'critical for operations' means in practical terms for your team.", type: "inquiry"}
                        ]
                    },
                    {
                        speaker: "Sam Police - Police Department",
                        avatar: "👮‍♂️",
                        message: "I disagree with Alex. The patrol vehicle upgrade would serve multiple departments and be more cost-effective for everyone.",
                        options: [
                            {text: "Sam, what makes you think the patrol vehicle would be more beneficial than Alex's suggestion?", type: "advocacy"},
                            {text: "What underlying needs would the patrol vehicle upgrade address across departments?", type: "inquiry"},
                            {text: "How do you see the cost-effectiveness playing out in terms of meeting everyone's needs?", type: "inquiry"}
                        ]
                    },
                    {
                        speaker: "Jordan EMS - Emergency Medical Services",
                        avatar: "🚑",
                        message: "Both options sound expensive. We need to think practically about our budget constraints and what we can actually afford.",
                        options: [
                            {text: "Jordan, what budget amount do you think would be reasonable for this purchase?", type: "advocacy"},
                            {text: "What concerns do you have about the budget impact of these different options?", type: "inquiry"},
                            {text: "What would need to be true about any equipment purchase for it to work within our financial reality?", type: "inquiry"}
                        ]
                    }
                ]
            },
            {
                title: "After-Action Learning Dialogue",
                description: "Following a multi-agency emergency response, different departments had varying experiences with coordination. The goal is to learn from the experience rather than assign blame.",
                focus: "Understanding system dynamics vs. identifying individual failures",
                steps: [
                    {
                        speaker: "Chief Williams - Incident Commander",
                        avatar: "🚒",
                        message: "The communication breakdown during the incident was unacceptable. Someone needs to be held accountable for this failure.",
                        options: [
                            {text: "Chief, who specifically do you think should be held accountable for the communication issues?", type: "advocacy"},
                            {text: "What patterns in our communication system might have contributed to this breakdown?", type: "inquiry"},
                            {text: "Help us understand what you observed during the communication challenges.", type: "inquiry"}
                        ]
                    },
                    {
                        speaker: "Lt. Garcia - Operations Lead",
                        avatar: "👮‍♂️",
                        message: "I felt like we were all working from different information. My team was confused about priorities and who was in charge of what.",
                        options: [
                            {text: "Lt. Garcia, why didn't your team ask for clarification when they were confused?", type: "advocacy"},
                            {text: "What would have helped your team feel more clear about priorities and roles during the incident?", type: "inquiry"},
                            {text: "What did the confusion look like from your team's perspective on the ground?", type: "inquiry"}
                        ]
                    },
                    {
                        speaker: "Dr. Chen - Medical Response Coordinator",
                        avatar: "🚑",
                        message: "From our side, we were getting conflicting directions from multiple sources. It made it very difficult to coordinate patient care effectively.",
                        options: [
                            {text: "Dr. Chen, couldn't your team have followed the standard medical protocols regardless of the conflicting directions?", type: "advocacy"},
                            {text: "What kind of coordination would have worked better for patient care in this type of incident?", type: "inquiry"},
                            {text: "What would ideal communication look like from a medical response perspective?", type: "inquiry"}
                        ]
                    }
                ]
            },
            {
                title: "Budget Allocation Dialogue",
                description: "Department heads are meeting to discuss annual budget allocations. Each department has compelling needs but resources are limited. Your role is to facilitate a conversation that explores underlying priorities rather than competing for funds.",
                focus: "Understanding resource priorities vs. competing for funding",
                steps: [
                    {
                        speaker: "Captain Torres - Training Coordinator",
                        avatar: "🚒",
                        message: "Our training budget has been cut three years in a row. We need to restore funding immediately or we'll fall behind on critical certifications.",
                        options: [
                            {text: "Captain Torres, what specific training programs should we prioritize with limited funds?", type: "advocacy"},
                            {text: "What challenges are you seeing with current certification levels that concern you most?", type: "inquiry"},
                            {text: "Help us understand what 'falling behind' would mean for operational readiness.", type: "inquiry"}
                        ]
                    },
                    {
                        speaker: "Supervisor Martinez - Equipment Manager",
                        avatar: "👮‍♂️",
                        message: "While training is important, our equipment is literally falling apart. We can't respond effectively with outdated gear that breaks down constantly.",
                        options: [
                            {text: "Supervisor Martinez, which equipment failures pose the biggest risk to operations?", type: "advocacy"},
                            {text: "What impact are the equipment issues having on your team's daily operations?", type: "inquiry"},
                            {text: "What would reliable equipment mean for your department's effectiveness?", type: "inquiry"}
                        ]
                    },
                    {
                        speaker: "Director Walsh - Operations Chief",
                        avatar: "🚑",
                        message: "Both needs are valid, but we also have staffing shortages that are burning out our current teams. We need to think about sustainable operations across all areas.",
                        options: [
                            {text: "Director Walsh, what's your recommendation for balancing these competing priorities?", type: "advocacy"},
                            {text: "What does sustainable operations look like from your perspective?", type: "inquiry"},
                            {text: "How are the current staffing challenges affecting team morale and performance?", type: "inquiry"}
                        ]
                    }
                ]
            }
        ];

        const feedbackMessages = {
            inquiry: [
                "Excellent choice! This inquiry-based question helps move the conversation from positions to underlying interests and needs.",
                "Great question! You're encouraging deeper exploration without challenging their position directly.",
                "Perfect approach! This inquiry opens up space for understanding rather than defending.",
                "Well done! This question helps uncover the real needs behind their stated position.",
                "Excellent facilitation! You're helping them reflect on their underlying concerns."
            ],
            advocacy: [
                "This is more of an advocacy approach. Consider how an inquiry-based question might encourage more reflection and exploration.",
                "While this question seeks information, it might put them on the defensive. Try a question that explores underlying needs.",
                "This approach might limit exploration. Consider asking 'what' or 'how' questions that encourage deeper thinking.",
                "This question could feel challenging. Try rephrasing to encourage them to share their perspective more openly.",
                "Consider shifting to inquiry to better understand their underlying concerns and needs."
            ]
        };

        function startScenario(scenarioNum) {
            currentScenario = scenarioNum;
            currentStep = 0;
            document.getElementById('intro-screen').classList.remove('active');
            document.getElementById('scenario-screen').classList.add('active');
            loadStep();
        }

        function loadStep() {
            const scenario = scenarios[currentScenario - 1];
            const step = scenario.steps[currentStep];
            
            // Update scenario info
            document.getElementById('scenarioTitle').textContent = scenario.title;
            document.getElementById('scenarioDescription').textContent = scenario.description;
            document.getElementById('scenarioFocus').textContent = scenario.focus;
            
            // Update speaker
            document.getElementById('currentSpeaker').innerHTML = `
                <div class="avatar">${step.avatar}</div>
                <div class="message">
                    <div class="speaker-name">${step.speaker}</div>
                    <div class="speaker-message">${step.message}</div>
                </div>
            `;
            
            // Update response options
            const optionsContainer = document.getElementById('responseOptions');
            optionsContainer.innerHTML = '';
            step.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = `response-btn ${option.type}`;
                button.textContent = option.text;
                button.onclick = () => selectResponse(index, option.type);
                optionsContainer.appendChild(button);
            });
            
            // Update navigation
            const totalSteps = scenarios.reduce((sum, s) => sum + s.steps.length, 0);
            const currentStepNumber = scenarios.slice(0, currentScenario - 1).reduce((sum, s) => sum + s.steps.length, 0) + currentStep + 1;
            document.getElementById('stepInfo').textContent = `Step ${currentStepNumber} of ${totalSteps}`;
            document.getElementById('nextBtn').disabled = true;
            document.getElementById('feedbackPanel').classList.remove('show');
            
            // Update progress
            updateProgress(currentStepNumber / totalSteps);
        }

        function selectResponse(index, type) {
            // Mark button as selected
            document.querySelectorAll('.response-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('.response-btn')[index].classList.add('selected');
            
            // Track response
            responses.push({scenario: currentScenario, step: currentStep, type: type});
            if (type === 'inquiry') {
                inquiryCount++;
            } else {
                advocacyCount++;
            }
            
            // Show feedback
            showFeedback(type);
            
            // Enable next button
            document.getElementById('nextBtn').disabled = false;
        }

        function showFeedback(type) {
            const feedbackPanel = document.getElementById('feedbackPanel');
            const feedbackTitle = document.getElementById('feedbackTitle');
            const feedbackText = document.getElementById('feedbackText');
            
            if (type === 'inquiry') {
                feedbackPanel.className = 'feedback-panel feedback-good show';
                feedbackTitle.innerHTML = '<span>✓</span> Excellent Choice!';
            } else {
                feedbackPanel.className = 'feedback-panel feedback-needs-work show';
                feedbackTitle.innerHTML = '<span>⚠</span> Consider This...';
            }
            
            const messages = feedbackMessages[type];
            feedbackText.textContent = messages[Math.floor(Math.random() * messages.length)];
        }

        function nextStep() {
            currentStep++;
            const scenario = scenarios[currentScenario - 1];
            
            if (currentStep >= scenario.steps.length) {
                // Move to next scenario
                currentScenario++;
                currentStep = 0;
                
                if (currentScenario > scenarios.length) {
                    // All scenarios complete
                    showCompletion();
                    return;
                }
            }
            
            loadStep();
        }

        function goBack() {
            if (currentStep > 0) {
                currentStep--;
                loadStep();
            } else if (currentScenario > 1) {
                currentScenario--;
                currentStep = scenarios[currentScenario - 1].steps.length - 1;
                loadStep();
            } else {
                // Go back to intro
                document.getElementById('scenario-screen').classList.remove('active');
                document.getElementById('intro-screen').classList.add('active');
            }
        }

        function showCompletion() {
            document.getElementById('scenario-screen').classList.remove('active');
            document.getElementById('completion-screen').classList.add('active');
            
            const total = inquiryCount + advocacyCount;
            const inquiryPercentage = Math.round((inquiryCount / total) * 100);
            const overallScore = Math.round((inquiryPercentage * 0.7) + (30)); // Base score + inquiry bonus
            
            document.getElementById('inquiryScore').textContent = inquiryPercentage + '%';
            document.getElementById('totalQuestions').textContent = total;
            document.getElementById('overallScore').textContent = overallScore;
            
            updateProgress(1);
        }

        function updateProgress(percentage) {
            document.getElementById('progressFill').style.width = (percentage * 100) + '%';
        }

        function restart() {
            currentStep = 0;
            currentScenario = 1;
            inquiryCount = 0;
            advocacyCount = 0;
            responses = [];
            
            document.getElementById('completion-screen').classList.remove('active');
            document.getElementById('intro-screen').classList.add('active');
            updateProgress(0);
        }
    </script>
</body>
</html>
